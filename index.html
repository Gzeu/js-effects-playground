<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="DevForge Playground - Ultimate Dev Dashboard PWA with Effects, Crypto, Infra Monitor, Code Playground, Deploy Tools">
  <meta name="theme-color" content="#00ff88">
  <title>DevForge Playground</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <!-- CDN Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/recharts@2.10.3/dist/Recharts.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">ğŸŒ“</button>
  
  <nav role="tablist" aria-label="Main navigation">
    <button role="tab" aria-selected="true" aria-controls="effects-tab" data-tab="effects" onclick="switchTab('effects')">
      âš¡ Effects Lab
    </button>
    <button role="tab" aria-selected="false" aria-controls="crypto-tab" data-tab="crypto" onclick="switchTab('crypto')">
      ğŸ’° Crypto Dashboard
    </button>
    <button role="tab" aria-selected="false" aria-controls="infra-tab" data-tab="infra" onclick="switchTab('infra')">
      ğŸ”§ Infra Monitor
    </button>
    <button role="tab" aria-selected="false" aria-controls="code-tab" data-tab="code" onclick="switchTab('code')">
      ğŸ’» Code Playground
    </button>
    <button role="tab" aria-selected="false" aria-controls="deploy-tab" data-tab="deploy" onclick="switchTab('deploy')">
      ğŸš€ Deploy Center
    </button>
  </nav>

  <main id="app-container" style="padding:0 2vw 3vw;">
    <!-- Effects Lab Tab -->
    <section id="effects-tab" role="tabpanel" class="tab-content fade-in-up" style="display:block;">
      <div class="glass-panel">
        <h2>âš¡ Effects Lab</h2>
        <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:1.5rem; margin-top:1.5rem;">
          <div class="effect-card">
            <h3>Metaballs</h3>
            <canvas id="metaballs-canvas" width="300" height="200" class="canvas-preview"></canvas>
            <div style="margin-top:0.8rem;">
              <label>Speed: <input type="range" min="1" max="10" value="5" id="metaballs-speed"></label>
            </div>
            <button onclick="exportCanvas('metaballs-canvas')" style="margin-top:0.5rem;">Export PNG</button>
          </div>
          
          <div class="effect-card">
            <h3>Matrix Rain</h3>
            <canvas id="matrix-canvas" width="300" height="200" class="canvas-preview"></canvas>
            <div style="margin-top:0.8rem;">
              <label>Intensity: <input type="range" min="10" max="100" value="50" id="matrix-intensity"></label>
            </div>
            <button onclick="exportCanvas('matrix-canvas')">Export PNG</button>
          </div>
          
          <div class="effect-card">
            <h3>Fractal Tree</h3>
            <canvas id="fractal-canvas" width="300" height="200" class="canvas-preview"></canvas>
            <div style="margin-top:0.8rem;">
              <label>Depth: <input type="range" min="3" max="12" value="8" id="fractal-depth"></label>
            </div>
            <button onclick="exportCanvas('fractal-canvas')">Export PNG</button>
          </div>
          
          <div class="effect-card">
            <h3>Particles Galaxy</h3>
            <canvas id="particles-canvas" width="300" height="200" class="canvas-preview"></canvas>
            <div style="margin-top:0.8rem;">
              <label>Count: <input type="range" min="50" max="500" value="200" id="particles-count"></label>
            </div>
            <button onclick="exportCanvas('particles-canvas')">Export PNG</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Crypto Dashboard Tab -->
    <section id="crypto-tab" role="tabpanel" class="tab-content" style="display:none;">
      <div class="glass-panel">
        <h2>ğŸ’° Crypto Dashboard</h2>
        <div id="crypto-charts" class="charts-panel"></div>
        <div style="margin-top:2rem; display:flex; gap:1rem; flex-wrap:wrap;">
          <button onclick="loadCryptoData()">ğŸ”„ Refresh Data</button>
          <button onclick="simulateTransaction()">âš¡ Simulate Gasless TX</button>
          <div style="margin-left:auto;">
            <span class="badge">BTC: $45,234</span>
            <span class="badge">ETH: $2,567</span>
            <span class="badge">BNB: $312</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Infra Monitor Tab -->
    <section id="infra-tab" role="tabpanel" class="tab-content" style="display:none;">
      <div class="glass-panel">
        <h2>ğŸ”§ Infrastructure Monitor</h2>
        <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:1.5rem; margin-top:1.5rem;">
          <div class="metric-card glass-panel">
            <h3>K8s Pods Status</h3>
            <div class="metric-value" style="font-size:2.5rem; color:var(--accent);">12/15</div>
            <div>Running</div>
            <progress value="80" max="100" style="width:100%; margin-top:1rem;"></progress>
          </div>
          
          <div class="metric-card glass-panel">
            <h3>CPU Usage</h3>
            <div class="metric-value" style="font-size:2.5rem; color:var(--accent-sec);">67%</div>
            <canvas id="cpu-gauge" width="200" height="100"></canvas>
          </div>
          
          <div class="metric-card glass-panel">
            <h3>Memory</h3>
            <div class="metric-value" style="font-size:2.5rem; color:var(--accent);">8.2/16 GB</div>
            <progress value="51" max="100" style="width:100%; margin-top:1rem;"></progress>
          </div>
          
          <div class="metric-card glass-panel">
            <h3>API Gateway (KrakenD)</h3>
            <div class="metric-value" style="font-size:1.8rem; color:#0f0;">âœ“ Healthy</div>
            <div style="margin-top:1rem;">Latency: 45ms</div>
          </div>
        </div>
        <div style="margin-top:2rem;">
          <button onclick="healthCheck()">ğŸ” Run Health Checks</button>
          <button onclick="parseLogs()">ğŸ“‹ Parse Logs</button>
        </div>
        <pre id="logs-output" style="background:var(--bg-glass); padding:1rem; border-radius:12px; margin-top:1rem; max-height:200px; overflow-y:auto;"></pre>
      </div>
    </section>

    <!-- Code Playground Tab -->
    <section id="code-tab" role="tabpanel" class="tab-content" style="display:none;">
      <div class="glass-panel">
        <h2>ğŸ’» Code Playground</h2>
        <div style="margin-bottom:1rem;">
          <label>Load Template: 
            <select id="template-select" onchange="loadTemplate()">
              <option value="">-- Select --</option>
              <option value="web3-connect">Web3 Wallet Connect</option>
              <option value="helm-deploy">Helm Chart</option>
              <option value="krakend-config">KrakenD Config</option>
              <option value="react-three">Three.js React</option>
              <option value="solana-tx">Solana Transaction</option>
            </select>
          </label>
          <button onclick="runCode()" style="margin-left:1rem;">â–¶ï¸ Run</button>
          <button onclick="clearEditor()">ğŸ—‘ï¸ Clear</button>
        </div>
        <div class="editor-split">
          <div class="editor-pane">
            <h3>Editor</h3>
            <div id="monaco-editor" style="height:400px; border-radius:12px; overflow:hidden;"></div>
          </div>
          <div class="preview-pane">
            <h3>Preview</h3>
            <iframe id="code-preview" style="width:100%; height:400px; border:none; background:#fff; border-radius:12px;"></iframe>
          </div>
        </div>
        <div class="console-pane" style="margin-top:1rem;">
          <h3>Console</h3>
          <pre id="console-output" style="min-height:100px; background:#000; color:#0f0; padding:1rem; border-radius:12px; overflow-y:auto;"></pre>
        </div>
      </div>
    </section>

    <!-- Deploy Center Tab -->
    <section id="deploy-tab" role="tabpanel" class="tab-content" style="display:none;">
      <div class="glass-panel">
        <h2>ğŸš€ Deploy Center</h2>
        <div style="margin-top:1.5rem;">
          <h3>One-Click Deploy</h3>
          <button onclick="generateZip()" style="font-size:1.1rem; padding:1rem 2rem;">ğŸ“¦ Generate Production ZIP</button>
          <button onclick="generateGitHubActions()" style="margin-left:1rem;">âš™ï¸ Generate GitHub Actions</button>
          <button onclick="generateVercel()" style="margin-left:1rem;">â–² Generate Vercel Config</button>
        </div>
        
        <div style="margin-top:2rem;">
          <h3>Generated Files</h3>
          <div id="deploy-files" style="background:var(--bg-glass); padding:1.5rem; border-radius:12px; min-height:150px;">
            <p style="color:var(--text-sec);">Click buttons above to generate deployment configs...</p>
          </div>
        </div>
        
        <div style="margin-top:2rem;">
          <h3>Quick Deploy Links</h3>
          <p>
            <a href="https://vercel.com/new" target="_blank" style="color:var(--accent);">Deploy to Vercel â†’</a> | 
            <a href="https://pages.github.com/" target="_blank" style="color:var(--accent);">Deploy to GitHub Pages â†’</a>
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer style="text-align:center; padding:2rem; color:var(--text-sec); font-size:0.9rem;">
    <p>DevForge Playground v1.0 | MIT License | Built with â¤ï¸ by DevForge AI</p>
  </footer>

  <script src="app.js"></script>
  <script>
    // PWA Install Prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      console.log('PWA install prompt available');
    });
    
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').then(() => {
        console.log('Service Worker registered');
      });
    }
  </script>
</body>
</html>