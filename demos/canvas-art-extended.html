<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Canvas Generative Art</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: radial-gradient(circle at top, #020617 0, #000000 65%);
      color: #e5e7eb;
      font-family: system-ui, sans-serif;
    }
    canvas { display: block; }
    .control-panel {
      position: fixed;
      top: 10px; right: 10px;
      padding: 10px 12px;
      background: rgba(15, 23, 42, 0.85);
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      backdrop-filter: blur(10px);
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 20;
    }
    .control-panel button {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(59, 130, 246, 0.7);
      color: #bfdbfe;
      font-size: 11px;
      padding: 4px 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .control-panel button:hover {
      border-color: rgba(59, 130, 246, 1);
      background: rgba(37, 99, 235, 0.5);
    }
    .control-panel button.active {
      background: rgba(37, 99, 235, 0.9);
      color: #eff6ff;
      border-color: rgba(59, 130, 246, 1);
    }
    .back-link {
      position: fixed;
      top: 10px; left: 10px;
      padding: 8px 12px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      backdrop-filter: blur(8px);
      font-size: 12px;
      z-index: 20;
    }
    .back-link a {
      color: #93c5fd;
      text-decoration: none;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <canvas id="art"></canvas>
  <div class="back-link">
    <a href="../index.html">‚Üê back</a> Canvas generative art
  </div>
  <div class="control-panel">
    <strong>Mode</strong>
    <button data-mode="waves" class="active">Waves</button>
    <button data-mode="orbits">Orbits</button>
    <button data-mode="constellation">Constellation</button>
    <button data-mode="plasma">Plasma</button>
  </div>

  <script>
    const canvas = document.getElementById('art');
    const ctx = canvas.getContext('2d');
    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    window.addEventListener('resize', () => {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    });

    let mode = 'waves';
    let t = 0;

    const buttons = document.querySelectorAll('.control-panel button');
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        mode = btn.dataset.mode;
        buttons.forEach(b => b.classList.toggle('active', b === btn));
      });
    });

    function drawWaves() {
      ctx.fillStyle = 'rgba(0, 0, 0, 0.18)';
      ctx.fillRect(0, 0, width, height);
      const lines = 4;
      for (let j = 0; j < lines; j++) {
        ctx.beginPath();
        for (let x = 0; x < width; x += 6) {
          const freq = 0.004 + j * 0.0008;
          const amp = 40 + j * 22;
          const y = height/2
            + Math.sin(x * freq + t * 0.04 + j) * amp
            + Math.sin(x * 0.0009 - t * 0.03 + j * 3) * 18;
          if (x === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        const hue = 200 + j * 25 + Math.sin(t * 0.02 + j) * 20;
        ctx.strokeStyle = `hsla(${hue}, 90%, 65%, 0.9)`;
        ctx.lineWidth = 1.6;
        ctx.stroke();
      }
    }

    const orbits = Array.from({ length: 80 }, () => ({
      angle: Math.random() * Math.PI * 2,
      radius: 30 + Math.random() * (Math.min(width, height) / 2 - 40),
      speed: (Math.random() * 0.008 + 0.002) * (Math.random() < 0.5 ? -1 : 1),
      size: Math.random() * 2 + 1.2
    }));

    function drawOrbits() {
      ctx.fillStyle = 'rgba(2, 6, 23, 0.22)';
      ctx.fillRect(0, 0, width, height);
      const cx = width / 2, cy = height / 2;
      ctx.strokeStyle = 'rgba(148, 163, 184, 0.25)';
      ctx.lineWidth = 0.5;
      for (let r = 60; r < Math.min(width, height) / 2; r += 40) {
        ctx.beginPath();
        ctx.arc(cx, cy, r, 0, Math.PI * 2);
        ctx.stroke();
      }
      orbits.forEach(p => {
        p.angle += p.speed;
        const x = cx + Math.cos(p.angle) * p.radius;
        const y = cy + Math.sin(p.angle) * p.radius;
        const hue = 180 + (p.radius / (Math.min(width, height) / 2)) * 120;
        const alpha = 0.4 + (p.radius / (Math.min(width, height) / 2)) * 0.4;
        ctx.beginPath();
        ctx.fillStyle = `hsla(${hue}, 90%, 70%, ${alpha})`;
        ctx.arc(x, y, p.size, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    const stars = Array.from({ length: 130 }, () => ({
      x: Math.random() * width,
      y: Math.random() * height,
      vx: (Math.random() - 0.5) * 0.3,
      vy: (Math.random() - 0.5) * 0.3,
      size: Math.random() * 2 + 0.5
    }));

    function drawConstellation() {
      ctx.fillStyle = 'rgba(0, 0, 0, 0.24)';
      ctx.fillRect(0, 0, width, height);
      for (const s of stars) {
        s.x += s.vx; s.y += s.vy;
        if (s.x < 0 || s.x > width) s.vx *= -1;
        if (s.y < 0 || s.y > height) s.vy *= -1;
      }
      for (let i = 0; i < stars.length; i++) {
        for (let j = i + 1; j < stars.length; j++) {
          const a = stars[i], b = stars[j];
          const dx = a.x - b.x, dy = a.y - b.y;
          const dist = Math.sqrt(dx*dx + dy*dy);
          if (dist < 130) {
            const alpha = (1 - dist / 130) * 0.6;
            ctx.strokeStyle = `rgba(148, 163, 184, ${alpha})`;
            ctx.lineWidth = 0.4;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.stroke();
          }
        }
      }
      for (const s of stars) {
        ctx.beginPath();
        ctx.fillStyle = 'rgba(248, 250, 252, 0.9)';
        ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function hslToRgb(h, s, l) {
      let r, g, b;
      if (s === 0) r = g = b = l;
      else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1; if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }
      return [r * 255, g * 255, b * 255];
    }

    function drawPlasma() {
      const imgData = ctx.createImageData(width, height);
      const data = imgData.data;
      for (let y = 0; y < height; y += 2) {
        for (let x = 0; x < width; x += 2) {
          const v = Math.sin(x * 0.01 + t * 0.03) + Math.sin(y * 0.015 - t * 0.025) + Math.sin((x + y) * 0.008 + t * 0.02);
          const n = (v + 3) / 6;
          const hue = 200 + n * 160;
          const light = 40 + n * 40;
          const col = hslToRgb(hue / 360, 0.8, light / 100);
          const idx = (y * width + x) * 4;
          data[idx] = col[0]; data[idx + 1] = col[1]; data[idx + 2] = col[2]; data[idx + 3] = 255;
        }
      }
      ctx.putImageData(imgData, 0, 0);
    }

    function loop() {
      t++;
      if (mode === 'waves') drawWaves();
      else if (mode === 'orbits') drawOrbits();
      else if (mode === 'constellation') drawConstellation();
      else if (mode === 'plasma') drawPlasma();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
